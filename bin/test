#!/bin/bash

ASDF_INSTALL_DIR=$HOME/.asdf/installs/context/21.08.11

cd $ASDF_INSTALL_DIR

rm -rf bin
CONTEXT_BIN_DIR=$(find $ASDF_INSTALL_DIR -iname bin)
mkdir -p bin

for cmd in `ls $CONTEXT_BIN_DIR` ; do
  case $cmd in
    *.lua)
      ;;
    *)
    echo $cmd
    cat <<END_TEMPLATE > bin/$cmd
#!/usr/bin/env bash
# asdf-context-plugin: $cmd
exec $CONTEXT_BIN_DIR/$cmd \$@
END_TEMPLATE

    chmod a+x bin/$cmd
  esac
done

exit 0

